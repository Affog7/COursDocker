{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { setFavorites } from \"../../redux/actions/ActionFavorites\";\nimport { fetchFavorites } from \"./thunkListFavorites\";\nexport var insertFavorite = function insertFavorite(favorite) {\n  return function () {\n    var _ref = _asyncToGenerator(function* (dispatch, getState) {\n      try {\n        var favorites = getState().FavoritesReducer.favorites;\n        dispatch(fetchFavorites());\n        console.log(\"fffffff\" + favorites);\n        var updatedFavorites = [].concat(_toConsumableArray(favorites), [favorite]);\n        yield storeFavoriteToJSON(updatedFavorites);\n        dispatch(setFavorites(updatedFavorites));\n      } catch (error) {\n        console.log('Erreur lors de l\\'insertion du favori:', error);\n      }\n    });\n    return function (_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nvar storeFavoriteToJSON = function () {\n  var _ref2 = _asyncToGenerator(function* (weathers) {\n    try {\n      var jsonWeathers = JSON.stringify(weathers);\n      console.log(jsonWeathers);\n      yield AsyncStorage.setItem('favorite_weathers', jsonWeathers);\n    } catch (e) {\n      console.log(\"An error occurred\", e);\n    }\n  });\n  return function storeFavoriteToJSON(_x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["AsyncStorage","setFavorites","fetchFavorites","insertFavorite","favorite","_ref","_asyncToGenerator","dispatch","getState","favorites","FavoritesReducer","console","log","updatedFavorites","concat","_toConsumableArray","storeFavoriteToJSON","error","_x","_x2","apply","arguments","_ref2","weathers","jsonWeathers","JSON","stringify","setItem","e","_x3"],"sources":["C:/Users/Affognon/Desktop/reactProj/MeteoApp/Meteo/thunk/favorites/thunkStoreFavorite.tsx"],"sourcesContent":["// favoritesThunks.js\r\n\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { Weather } from \"../../data/stub\";\r\nimport { addToFavorites, setFavorites } from \"../../redux/actions/ActionFavorites\";\r\nimport { fetchFavorites } from \"./thunkListFavorites\";\r\n\r\n \r\nexport const insertFavorite =( favorite ) => {\r\n    return async (dispatch, getState) => {\r\n      try {\r\n      \r\n        // Récupérez les favoris actuels du state\r\n        const { favorites   } = getState().FavoritesReducer;\r\n       \r\n        dispatch(fetchFavorites())\r\n        console.log(\"fffffff\"+favorites)\r\n        // Ajoutez le nouveau favori\r\n        const updatedFavorites = [...favorites, favorite ];\r\n          await storeFavoriteToJSON(updatedFavorites);\r\n\r\n        // Mettez à jour le store Redux avec les nouveaux favoris\r\n        dispatch(setFavorites(updatedFavorites));\r\n  \r\n        // Mettez à jour le fichier JSON avec les nouveaux favoris\r\n      //  await storeFavoriteToJSON(updatedFavorites);\r\n      } catch (error) {\r\n        console.log('Erreur lors de l\\'insertion du favori:', error);\r\n      }\r\n    };\r\n  };\r\n  \r\nconst storeFavoriteToJSON = async (weathers) => {\r\n    try {\r\n      const jsonWeathers = JSON.stringify(weathers)\r\n      console.log(jsonWeathers);\r\n      await AsyncStorage.setItem('favorite_weathers', jsonWeathers);\r\n    } catch (e) {\r\n      console.log(\"An error occurred\", e);\r\n    }\r\n  }\r\n \r\n"],"mappings":";;AAEA,OAAOA,YAAY,MAAM,2CAA2C;AAEpE,SAAyBC,YAAY;AACrC,SAASC,cAAc;AAGvB,OAAO,IAAMC,cAAc,GAAE,SAAhBA,cAAcA,CAAIC,QAAQ,EAAM;EACzC;IAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAO,WAAOC,QAAQ,EAAEC,QAAQ,EAAK;MACnC,IAAI;QAGF,IAAQC,SAAS,GAAOD,QAAQ,CAAC,CAAC,CAACE,gBAAgB,CAA3CD,SAAS;QAEjBF,QAAQ,CAACL,cAAc,CAAC,CAAC,CAAC;QAC1BS,OAAO,CAACC,GAAG,CAAC,SAAS,GAACH,SAAS,CAAC;QAEhC,IAAMI,gBAAgB,MAAAC,MAAA,CAAAC,kBAAA,CAAON,SAAS,IAAEL,QAAQ,EAAE;QAChD,MAAMY,mBAAmB,CAACH,gBAAgB,CAAC;QAG7CN,QAAQ,CAACN,YAAY,CAACY,gBAAgB,CAAC,CAAC;MAI1C,CAAC,CAAC,OAAOI,KAAK,EAAE;QACdN,OAAO,CAACC,GAAG,CAAC,wCAAwC,EAAEK,KAAK,CAAC;MAC9D;IACF,CAAC;IAAA,iBAAAC,EAAA,EAAAC,GAAA;MAAA,OAAAd,IAAA,CAAAe,KAAA,OAAAC,SAAA;IAAA;EAAA;AACH,CAAC;AAEH,IAAML,mBAAmB;EAAA,IAAAM,KAAA,GAAAhB,iBAAA,CAAG,WAAOiB,QAAQ,EAAK;IAC5C,IAAI;MACF,IAAMC,YAAY,GAAGC,IAAI,CAACC,SAAS,CAACH,QAAQ,CAAC;MAC7CZ,OAAO,CAACC,GAAG,CAACY,YAAY,CAAC;MACzB,MAAMxB,YAAY,CAAC2B,OAAO,CAAC,mBAAmB,EAAEH,YAAY,CAAC;IAC/D,CAAC,CAAC,OAAOI,CAAC,EAAE;MACVjB,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEgB,CAAC,CAAC;IACrC;EACF,CAAC;EAAA,gBARGZ,mBAAmBA,CAAAa,GAAA;IAAA,OAAAP,KAAA,CAAAF,KAAA,OAAAC,SAAA;EAAA;AAAA,GAQtB"},"metadata":{},"sourceType":"module","externalDependencies":[]}